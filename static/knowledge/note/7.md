#### java-银行跨行转账-表设计

<div style="font-size: 18px">
<br />



```
      场景一：跨行转账
      用户A是工行用户，用户B是建行用户，A向B转账10000元，这里两个用户不是同一个行的用户，
      基本上就不会再采用同步的方式进行转账了。

      异步方式如下：
      1、创建转账订单，订单状态为待成功
      2、用户A冻结10000元
      3、提交事务
      这里需要保证的是用户资金和订单状态的事务。

      异步发送http请求到其他行进行转账业务，
      结果可以为
      1、转账成功：确认成功
      2、站长失败：确认失败
      3、请求异常：结果不确认

      对于结果不确定的情况就采用：查询的方式查询结果，查询结果还是不确定的话，就采用定时任务查询异常订单。

      金融项目一般不会太重视转账的实时性，而是重视转账的一致性，比较涉及到的是金钱，所以必须要确保转账的事务性。
      总的来说，解决转账的分布式事务还是以异步为主，采用的是最终一致性来解决分布式事务问题。

      大致流程如下：
      1、修改金额，并创建订单，确保订单和金额的一致性。（事务）
      2、异步发起转账请求
      3、接收异步回调或异步响应
      4、如果是成功则更新订单状态和金额，如果是失败则回滚，如果是不确定则通过查询的方式来确认订单的结果
      5、根据订单的最终结果来更新数据

```
<br />
</div>
